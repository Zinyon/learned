## 정규화

관계형 데이터베이스의 설계에서 중복을 최소화하게 데이터를 구조화하는 프로세스를 정규화라고 한다.

1. 삽입이상, 삭제이상, 갱신 이상 등 이상현상을 제거하고
   * 삽입이상 : 원하지 않는 자료가 삽입된다거나 삽입했는데 자료가 부족함.
   * 삭제이상 : 하나의 자료만 삭제하고 싶지만 튜플 전체가 삭제되어 원하지 않는 정보 손실이 일어남.
   * 갱신이상 : 일부의 튜플만 갱신되어 정보가 모호해지거나 정확한 정보 파악이 되지 않음.
2. 구조확장시 재 디자인을 최소화하며
3. 데이터 모델을 더욱 의미있게 하고
4. 다양한 질의를 지원하는 것에 그 목적이 있다.

조금 더 이론적으로 접근하면 함수적 종속성을 이용해서 연관성 있는 속성들을 분류하고, 각 릴레이션들에서 이상현상이 생기지 않도록 하는 과정을 말한다.

정규형에는 1,2,3,4,5,6NF까지 있으며 비공식적으로는 3NF가 되었으면 정규화되었다고 말한다.
3NF 대부분이 삽입, 변경, 삭제 이상이 없다.



### 제 1 정규형

1. 열에는 위-아래의 순서가 없다.
2. 행에는 좌-우의 순서가 없다.
3. 중복되는 열이 없다.
4. 모든 열과 행의 중복지점에는 (열과 행의)해당되는 분야에서 한 개의 값을 가진다.
5. 모든 행은 규칙적이다. [즉, 열은 열ID, 오브젝트ID, 숨어있는(hidden) 타임 스탬프등과 같은 숨어있는 요소(행)를 가지지 않는다.]

가장 중요한 것은 하나의 어트리뷰트가 하나의 값만 가져야 한다는 것이다. 이것을 원자 값으로만 구성되어 있다고 한다.
다음과 같은 형태는 1정규화를 위배.

| Customer ID | First Name | Surname   | Telephone Number            |
| ----------- | ---------- | --------- | --------------------------- |
| 123         | Robert     | Ingram    | 555-861-2025                |
| 456         | Jane       | Wright    | 555-403-1659 , 555-776-4100 |
| 789         | Maria      | Fernandez | 555-808-9633                |



### 제 2 정규형

기본키가 아닌 모든 속성이 기본키에 완전 함수 종속되면 제2정규형이다. 



| 종업원 | 기술      | 근무지          |
| ------ | --------- | --------------- |
| Jones  | Typing    | 114 Main Street |
| Jones  | Shorthand | 114 Main Street |
|        |           |                 |

'근무지'에 중복이 있다. 이럴 경우 "종업원-기술" , "종업원-근무지"로 테이블 변경을 해주어야 한다.

#### 함수종속성

A,B가 관계 R의 속성이고 A의 어떤 값도 반드시 B의 하나의 값에 대응되지만, B의 하나의 값이 A의 복수값에 대응되는 경우 **B는 A에 함수 종속**이다. 이를 A->B라고 표기한다.

{직원ID} -> {직원생일}일 때, 직원생일은 직원ID에 의존

속성집합 Y가 속성집합 X의 전체가 아닌 일부분에도 함수적으로 종속됨



### 제 3 정규형

1. 테이블이 제2정규형을 만족하고
2. 모든 속성이 기본 키에만 의존하며, 다른 후보 키에 의존하지 않는다.

| 대회 | 연도 | 우승자 | 우승자 생년월일 |
| ---- | ---- | ------ | --------------- |
|      |      |        |                 |

이 테이블은 '대회'가 기본키이고 기본키가 하나이므로 2NF이지만 3NF는 아니다.

'우승자 생년월일이 우승자에 종속되기 때문.

"대회-연도", "우승자-우승자 생년월일"로 나누어 줄 수 있다.



### BNCF

Boyce and Codd Normal Form.

1. 테이블이 제3정규형을 만족하면서
2. 모든 결정자가 후보키 집합에 속한 정규형



### 반정규화

정규화된 릴레이션을 시스템 성능 향상 및 개발과 운영의 단순화를 위해 중복 통합, 분리 등을 수행하는 기법.

릴레이션의 분리로 인해 조회를 하는 SQL문에서 조인이 너무 많이 발생하여 성능저하가 나타나는 경우 반정규화를 적용할 수 있다.





